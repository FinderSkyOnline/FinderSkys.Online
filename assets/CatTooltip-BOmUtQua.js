import{_ as P,f as p,g as j,h as A,i as F,c as d,o as m,b as M,n as y,t as S,j as w,d as V,w as G,F as O,k as Q,l as U,T as W}from"./app-sBKiCssS.js";const q=["aria-label"],H=["src","alt"],J={class:"cat-bubbles-container"},K={__name:"CatTooltip",props:{text:{type:String,default:"å¥½å¤©æ°”+1"},texts:{type:Array,default:null},emoji:{type:String,default:"ðŸ±"},imageSrc:{type:String,default:null},displayType:{type:String,default:"emoji",validator:r=>["emoji","image"].includes(r)},maxBubbles:{type:Number,default:5},size:{type:[String,Number,Object],default:"28px"}},setup(r){const o=r,u=p([]),C=p(null);let I=0;const h=p(!0),v=p(!1),f=p("desktop"),z=()=>{if(typeof window>"u")return"desktop";const e=window.innerWidth;return e<640?"mobile":e<1024?"tablet":"desktop"},B=e=>{if(typeof e=="number")return e;const t=e.match(/([\d.]+)(px|rem|em)?/);if(!t)return 28;const a=parseFloat(t[1]),n=t[2]||"px";return n==="rem"||n==="em"?a*16:a},L=()=>{switch(f.value){case"mobile":return .75;case"tablet":return .9;case"desktop":return 1;default:return 1}},T=()=>{const e=o.size;if(typeof e=="object"&&e!==null){const s=f.value,i=e[s]||e.mobile||e.tablet||e.desktop||"28px";return typeof i=="number"?`${i}px`:i}let t="28px";typeof e=="number"?t=`${e}px`:typeof e=="string"&&(t=e);const a=B(t),n=L(),l=a*n;return typeof e=="string"&&(e.includes("rem")||e.includes("em"))?`${l/16}rem`:`${l}px`},k=j(()=>T()),N=j(()=>T());let c=null,b=null,g=null,x=null;A(()=>{f.value=z(),g=()=>{clearTimeout(x),x=setTimeout(()=>{f.value=z()},150)},window.addEventListener("resize",g),c=window.matchMedia("(prefers-color-scheme: dark)"),v.value=c.matches,h.value=!c.matches,b=e=>{v.value=e.matches,h.value=!e.matches},c.addEventListener("change",b)}),F(()=>{c&&b&&c.removeEventListener("change",b),g&&window.removeEventListener("resize",g),x&&clearTimeout(x)});const R=e=>{let t=e.replace(/\{(\d+),(\d+)\}/g,(a,n,l)=>{const s=parseInt(n,10),i=parseInt(l,10);return s>i?a:(Math.floor(Math.random()*(i-s+1))+s).toString()});return t=t.replace(/\{randomNum\((\d+),(\d+)\)\}/g,(a,n,l)=>{const s=parseInt(n,10),i=parseInt(l,10);return s>i?a:(Math.floor(Math.random()*(i-s+1))+s).toString()}),t},E=()=>{let e=o.text||"å¥½å¤©æ°”+1";if(o.texts&&Array.isArray(o.texts)&&o.texts.length>0){const a=Math.floor(Math.random()*o.texts.length);e=o.texts[a]}return R(e)||e},$=e=>{e&&(e.preventDefault(),e.stopPropagation());const t=E(),a={id:I++,text:t};u.value.push(a),u.value.length>o.maxBubbles&&u.value.shift(),setTimeout(()=>{const n=u.value.findIndex(l=>l.id===a.id);n!==-1&&u.value.splice(n,1)},3e3)};return(e,t)=>(m(),d("div",{class:"cat-tooltip-wrapper",ref_key:"wrapperRef",ref:C},[M("button",{class:"cat-button",onClick:w($,["prevent"]),"aria-label":r.text,type:"button"},[r.displayType==="emoji"?(m(),d("span",{key:0,class:"cat-emoji",style:y({fontSize:k.value})},S(r.emoji),5)):r.displayType==="image"&&r.imageSrc?(m(),d("img",{key:1,src:r.imageSrc,alt:r.emoji,class:"cat-image",style:y({width:N.value,height:N.value}),draggable:"false",onDragstart:t[0]||(t[0]=w(()=>{},["prevent"])),onContextmenu:t[1]||(t[1]=w(()=>{},["prevent"]))},null,44,H)):(m(),d("span",{key:2,class:"cat-emoji",style:y({fontSize:k.value})},S(r.emoji),5))],8,q),M("div",J,[V(W,{name:"bubble",tag:"div"},{default:G(()=>[(m(!0),d(O,null,Q(u.value,(a,n)=>(m(),d("div",{key:a.id,class:U(["cat-bubble",{"cat-bubble-light":h.value,"cat-bubble-dark":v.value}]),style:y({bottom:`${n*48}px`})},S(a.text),7))),128))]),_:1})])],512))}},Y=P(K,[["__scopeId","data-v-ff6f738b"]]);export{Y as default};
